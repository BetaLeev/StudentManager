<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="../../aui-20170109-v2.1/css/aui.css" />
    <link rel="stylesheet" href="../../css/common.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
    <title>选择日期</title>
    <style>
        body {
            width: 100vw;
            height: 100vh
        }

        button {

            background: #fed765;
            display: block;
            width: 100%;

        }

        input {
            margin: 0 auto;
            width: 80%;
            text-align: center;
        }
    </style>
</head>

<body>
    <header class="aui-bar aui-bar-nav aui-bar-light">
        <div class="aui-pull-left aui-btn">
            <span class="aui-iconfont aui-icon-left" onclick="closeCurrentWin()"></span>
        </div>
        <div class="aui-title">选择入驻日期</div>
        <div class="aui-pull-right aui-btn">
        </div>
    </header>

    <input type="text" onfocus="this.blur();" name="daterange" value="01/01/2019 - 01/15/2019" />

    <!-- <button class="btn-normal" onclick="closeCurrentWin()">确定</button> -->
    <script src="../../script/api.js" charset="utf-8"></script>
    <script src="../../script/common.js" charset="utf-8"></script>

    <script>


    </script>


    <script type="text/javascript">
        apiready = function() {
          var id = api.pageParam.id;
          var img = api.pageParam.img;
          var title = api.pageParam.title;
          var subtitle = api.pageParam.subtitle;
          var count = api.pageParam.count;
          var price = api.pageParam.price;
          console.log(id)

          $('input[name="daterange"]').daterangepicker({
              opens: 'center'
          }, function(start, end, label) {
              $api.setStorage('startTime',start.format('YYYY-MM-DD') );
              $api.setStorage('endTime', end.format('YYYY-MM-DD'));
              console.log("您选择到时间是: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
              toPreviewOrder(id,img,title,subtitle,count,price)
          });

          function toPreviewOrder(id,img,title,subtitle,count,price){
            api.openWin({
                name: '订单预览',
                url: './book_detail.html',
                pageParam: {
                    id:id,
                    img:img,
                    title:title,
                    subtitle:subtitle,
                    count:count,
                    price:price
                }
            });

          }
        }



        // function openCa() {
        //     var UICalendar = api.require('UICalendar');
        //
        //     UICalendar.open({
        //         rect: {
        //             x: 30,
        //             y: 75,
        //             w: api.frameWidth - 60,
        //             h: 300
        //         },
        //         styles: {
        //             bg: 'rgba(123,456,0,0)',
        //             week: {
        //                 weekdayColor: '#3b3b3b',
        //                 weekendColor: '#3b3b3b',
        //                 size: 18
        //             },
        //             date: {
        //                 color: '#3b3b3b',
        //                 selectedColor: '#fff',
        //                 selectedBg: '#fed765',
        //                 size: 18
        //             },
        //             today: {
        //                 color: 'rgb(230,46,37)',
        //                 bg: ''
        //             },
        //             specialDate: {
        //                 color: '#a8d500',
        //                 bg: 'widget://image/a.png'
        //             }
        //         },
        //
        //         isBefore: true,
        //         switchMode: 'vertical',
        //         fixedOn: api.frameName,
        //         fixed: false
        //     }, function(ret, err) {
        //         if (ret) {
        //             // alert(JSON.stringify(ret));
        //         } else {
        //             // alert(JSON.stringify(err));
        //         }
        //     });
        // }
    </script>
    <script src="../../script/common.js" charset="utf-8"></script>
</body>

</html>
