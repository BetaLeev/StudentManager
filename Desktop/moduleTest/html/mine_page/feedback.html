<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>意见反馈</title>
    <link rel="stylesheet" type="text/css" href="../../aui-20170109-v2.1/css/aui.css" />
    <script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
    <script src="https://cdn.bootcss.com/sweetalert/2.1.2/sweetalert.min.js"></script>

    <link rel="stylesheet" href="../../css/common.css">
    <style>
        body,
        html {
            width: 100%;
            height: auto;
            padding: 0;
            margin: 0;
        }

        .aui-bar,
        .aui-bar span {
            color: #4b4b4b !important;
        }

        body {
            background-color: #fff;
        }

        section {
            height: auto;
            width: 100%;
        }

        section .option {
            position: relative;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-flex-flow: row;
            flex-flow: row;
            box-sizing: border-box;
            width: 100%;
            height: 60px;
            padding-left: 16px;
            padding-right: 16px;
            margin-bottom: 1px;
            background-color: #fff;
            border-bottom: 1px solid #f1f1f1;
        }

        .textplace {
            width: 75%;
            height: 54px;
            font-size: 14px;
            font-weight: 400;
            background: white;
            padding-top: 5px;
            /*padding-left: 16px;*/
            outline: none;
            color: #707070;
        }

        textarea {
            width: 90%;
            height: 54px;
            font-size: 14px;
            font-weight: 400;
            background: white;
            padding-top: 5px;
            padding-left: 16px;
            outline: none;
        }

        section .option .name {
            width: auto;
            margin-left: 0;
            line-height: 60px;
        }

        section .option .input {
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
            height: 60px;
            box-sizing: border-box;
            padding-top: 22px;
            margin-left: 15px;
        }

        section .option .input input {
            font-size: 14px;
            width: 100%;
            height: 20px;
            line-height: 14px;
            vertical-align: top;
            border: none;
            outline: none;
            position: relative;
            top: -1px;
            left: 5px;
        }

        .option1 {
            position: relative;
            display: -webkit-box;
            display: -webkit-flex;
            display: flex;
            -webkit-box-orient: horizontal;
            -webkit-flex-flow: row;
            flex-flow: row;
            box-sizing: border-box;
            width: 100%;
            height: 100px;
            padding-left: 16px;
            padding-right: 16px;
            margin-bottom: 1px;
            background-color: #fff;
            border-bottom: 1px solid #f1f1f1;
        }

        section .option1 .name {
            width: auto;
            margin-left: 0;
            line-height: 60px;
        }

        section .option1 .input {
            -webkit-box-flex: 1;
            -webkit-flex: 1;
            flex: 1;
            height: 60px;
            box-sizing: border-box;
            padding-top: 22px;
        }

        section .option1 .input input {
            font-size: 14px;
            width: 100%;
            height: 20px;
            line-height: 14px;
            vertical-align: top;
            border: none;
            outline: none;
            position: relative;
            top: -1px;
            left: 5px;
        }
        /*.dtn_box{
        width: 100%;
        background: #ffffff;
        position: absolute;
        bottom: 0px;
    }*/

        .button {
          outline: none;
          border: none;
            width: 100%;
            height: 50px;
            background-color: #FED765;
            line-height: 50px;
            color: #000000;
            margin: 0 auto;
            font-size: 1rem;
            text-align: center;
            border-radius: 8px;
            position: absolute;
            bottom: 0px;
        }

        .highlight {
            opacity: 0.7;
        }
    </style>
</head>

<body>
    <header class="aui-bar aui-bar-nav aui-bar-light">
        <div class="aui-pull-left aui-btn">
            <span class="aui-iconfont aui-icon-left" onclick="closeCurrentWin()"></span>
        </div>
        <div class="aui-title">意见反馈</div>
        <div class="aui-pull-right aui-btn">
        </div>
    </header>
    <section id='feedback'>
        <div class="option">
            <div class="name">空间名称:</div>
            <div class="input">
                <input v-model='form.station' id="space_name" type="text" placeholder="选填">
            </div>
        </div>
        <div class="option1">
            <!-- 这里面的布局需要调整一下 -->
            <div class="name">内容描述:</div>
            <div class="textplace">
                <textarea v-model='form.content' id='content' type="text" placeholder="请在这里留下您的宝贵意见或者您遇到的问题。"></textarea>
            </div>
        </div>

        <div class="option">
            <div class="name">称&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;呼:</div>
            <div class="input">
                <input v-model='form.name' type="text" placeholder="请填写您的称呼">
            </div>
        </div>
        <div class="dtn_box">
            <button class="button"  @click="submitForm()">提交</button>
        </div>
    </section>
</body>
<script type="text/javascript" src="../../script/common.js" charset="utf-8"></script>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript">
    apiready = function() {};

    function checkInput(value) {
        if (value && value !== '') {
            return true
        } else {
            return false
        }
    }

    new Vue({
        el: '#feedback',
        data() {
            return {
                form: {
                    name: '',
                    station: '',
                    content: ''
                }
            }
        },
        methods: {

            submitForm() {
                if (checkInput(this.form.name) && checkInput(this.form.station) && checkInput(this.form.content)) {
                    var model = api.require("model");
                    model.config({
                        appKey: 'B4BE1D4A-18F6-42D1-48CF-DF6C6EA9983E',
                    })
                    model.insert({
                        class: "era_feedback",
                        value: {
                            name: this.form.name,
                            station: this.form.station,
                            content: this.form.content
                        }
                    }, function(ret, err) {
                        if (err) {
                            swal("Oops", "反馈遇到问题", "error")
                        } else if (ret) {
                            swal("成功", "反馈成功", "success");
                            goNextWin('./index.html')
                        }
                        this.form = {}
                    });
                } else {
                    swal("Oops", "请填写完整后重试", "error")
                }
            }
        }
    })
</script>

</html>
