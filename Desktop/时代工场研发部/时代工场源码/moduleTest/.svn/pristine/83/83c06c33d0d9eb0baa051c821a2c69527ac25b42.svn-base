<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>底部导航</title>
    <link rel="stylesheet" type="text/css" href="./css/api.css"/>
    <link rel="stylesheet" type="text/css" href="./css/style.css"/>
</head>
<body>

</body>
<script type="text/javascript" src="script/api.js"></script>
<script type="text/javascript">
    var numberFlag = 0;
    var olderPage = "framehomepage";
    var olderNumber = 0;
    var hight_set;
    apiready = function () {
        var screenHeight = api.winHeight;
        if(api.systemType=="ios"){
            hight_set=120
        }else{
            hight_set=80
            if(screenHeight==740){
                hight_set = 85;
            }
        }
        var NVTabBar = api.require('NVTabBar');
        NVTabBar.bringToFront();
        if(screenHeight!=640){
            api.setStatusBarStyle({
            style: 'dark',
            color:'#fff'
        });
        }
        NVTabBar.open({
    styles: {
        h: 55,
        dividingLine: {
            width: 0.5,
            color: '#dbdbdb',
        },
        badge: {
            bgColor: '#ff0',
            numColor: '#fff',
            size: 6.0,
            centerX: 6.0,
            centerY: 6.0
        }
    },
    items: [{
        w: api.winWidth / 5.0,
        iconRect: {
            w: 20.0,
            h: 20.0,
        },
        icon: {
            normal: 'image/navtabbar/home0101.png',
            highlight: 'image/navtabbar/home0102.png',
            selected: 'image/navtabbar/home0102.png'
        },
        title: {
            text: '首页',
            size: 12.0,
            normal: '#2c2c2c',
            selected: '#1296db',
            marginB: 6.0
        }
    }, {
        w: api.winWidth / 5.0,
        iconRect: {
            w: 20.0,
            h: 20.0,
        },
        icon: {
            normal: 'image/navtabbar/findaddress0201.png',
            highlight: 'image/navtabbar/findaddress0202.png',
            selected: 'image/navtabbar/findaddress0202.png'
        },
        title: {
            text: '找地儿',
            size: 12.0,
            normal: '#2c2c2c',
            selected: '#1296db',
            marginB: 6.0
        }
    }, {
        w: api.winWidth / 5.0,
        iconRect: {
            w: 20.0,
            h: 20.0,
        },
        icon: {
            normal: 'image/navtabbar/key0102.png',
            highlight: 'image/navtabbar/key0102.png',
            selected: 'image/navtabbar/key0101.png'
        },
        title: {
            text: '一键解锁',
            size: 12.0,
            normal: '#2c2c2c',
            selected: '#1296db',
            marginB: 6.0
        }
    }, { 
        w: api.winWidth / 5.0,
        iconRect: {
            w: 24.0,
            h: 24.0,
        },
        icon: {
            normal: 'image/navtabbar/msg0601.png',
            highlight: 'image/navtabbar/msg0602.png',
            selected: 'image/navtabbar/msg0602.png'
        },
        title: {
            text: '会话',
            size: 12.0,
            normal: '#2c2c2c',
            selected: '#1296db',
            marginB: 6.0
        }
    }, {
        w: api.winWidth / 5.0,
        iconRect: {
            w: 22.0,
            h: 22.0,
        },
        icon: {
            normal: 'image/navtabbar/my0301.png',
            highlight: 'image/navtabbar/my0302.png',
            selected: 'image/navtabbar/my0302.png'
        },
        title: {
            text: '我的',
            size: 12.0,
            normal: '#2c2c2c',
            selected: '#1296db',
            marginB: 6.0
        }
    }],
    selectedIndex: 0
}, function(ret, err) {
    if(ret){
        if(numberFlag!=0){
         if(ret.eventType =='click' && ret.index==0 && ret.index!=olderNumber){
            showMenuPage("html/homepage.html",'framehomepage');
            olderNumber = ret.index;
            olderPage = 'framehomepage'
         }else if(ret.eventType =='click' && ret.index==1 && ret.index!=olderNumber){
            showMenuPage("html/findhouse.html",'framehouse');
            olderNumber = ret.index;
            olderPage = 'framehouse'
         }else if(ret.eventType =='click' && ret.index==2 && ret.index!=olderNumber){
            showMenuPage("html/lock.html",'frame_lock');
            olderNumber = ret.index;
            olderPage = 'frame_lock'
         }else if(ret.eventType =='click' && ret.index==3 && ret.index!=olderNumber){
            showMenuPage("html/message.html",'frame_message');
            olderNumber = ret.index;
            olderPage = 'frame_message'
         }
         else if(ret.eventType =='click' && ret.index==4 && ret.index!=olderNumber){
            showMenuPage("html/my.html",'frame_my');
            olderNumber = ret.index;
            olderPage = 'frame_my'
         }
    }
    else{
        showMenuPage("html/homepage.html",'framehomepage');
        numberFlag = 1;
    }
    }

});
    };
    function closeFrame(frame_name){
            api.closeFrame({
                name: frame_name
            });
    };
    // 显示菜单内容
    function showMenuPage(pageUrl,framename){
        if(numberFlag==1){
            if(olderPage=='framehomepage'){
                closeFrame('homeson')
            }else if(olderPage=='framehouse'){
                closeFrame('findhouse_content_frame')
            }else if(olderPage=='frame_message'){
                closeFrame('message_frame_module');
            }else if(olderPage=='frame_my'){
                closeFrame('my_module_frame');
            }
                closeFrame(olderPage)
            }
        api.openFrame({
                    name:framename,
                    url:pageUrl,
                    rect:{
                        x: 0,
                        y: 25,
                        w: api.winWidth,
                        h: api.winHeight-hight_set,
                        marginLeft: 0, //相对父 window 左外边距的距离
                        marginTop: 0, //相对父 window 上外边距的距离
                        marginBottom:0, //相对父 window 下外边距的距离
                        marginRight:0 //相对父 window 右外边距的距离
                    },
                    bounces: false,
                    bgColor: 'rgba(0,0,0,0)',
                    vScrollBarEnabled: false,
                    hScrollBarEnabled: false
                })
    }
    
</script>
</html>
