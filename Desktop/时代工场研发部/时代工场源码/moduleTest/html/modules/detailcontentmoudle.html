<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>详情页详细数据</title>
    <style>
        body{
            margin: 0;
            padding: 0;
            height: auto;
        }
        /*头部css*/
        .datas_box{
            width: auto;
            height: 99%;
            position: absolute;
            top:41%;
        }
        #title{
            width: auto;
            margin-left: 20px;
            font-family: SourceHanSansSC;
            font-weight: 400;
            height: auto;
            font-size: 20px;
            color: #101010;
            font-style: normal;
            letter-spacing: 0px;
            margin-bottom: 10px;
            line-height: 30px;
            text-decoration: none;
        }
        .price{
            width: 40%;
            height: auto;
            margin-bottom: 10px;
            margin-left: 20px;
            font-family: SourceHanSansSC;
            font-weight: 400;
            font-size: 14px;
            color: #101010;
            font-style: normal;
            letter-spacing: 0px;
            text-decoration: none;
        }
        
        #address_top{
            
            width: auto;
            position: relative;
            top:10px;
            height: 40px;
            margin-bottom: 10px;
            margin-left: 20px;
            font-family: SourceHanSansSC;
            font-weight: 400;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 12px;
            color: #101010;
            font-style: normal;
            letter-spacing: 0px;
            text-decoration: none;
        }
        #parameters{
            width:100%;
            height: auto;
            border-top:1px solid #101010;
            background: #f5f1f1;
            border-bottom: 1px solid #101010;
        }
        #parameters p{
            font-size:14px;
            color:#000000;
            margin-left: 20px;
        }
        .tips{
            width: 100%;
            height: auto;
            font-size: 14px;
            padding: 0px;
            text-align: left;
            text-indent: 2em;
            padding: 1px;
            color:#bbbdbe;
            border-bottom: 1px solid #101010;
            padding-bottom: 10px;
        }
        .icoitem{
            width: 20%;
            height:auto;
            font-size: 12px;
            display: flex;
            display: -webkit-flex;
            display: box;
            flex-direction: column;
            text-align: center;
            flex-wrap:wrap;
            flex-flow: wrap;
        }
        .icoitem span{
            width: 100%;
            height: auto;
            text-align: center;
            margin: 0 auto;
            display: flex;
            display: -webkit-flex;
            display: -webkit-box;
            -webkit-box-pack:center;
        }
        .icoitem img{
            margin: 0 auto;
            display: flex;
            display: -webkit-flex;
            display: -webkit-box;
            -webkit-box-pack:center;
            text-align: center;
            width:32px;
            height: 32px;
            margin-bottom: 10px;
        }
        .icos_top,.icos_second{
            width: 96%;
            text-align: center;
            margin: 0 auto;
            margin-bottom: 20px;
            display: flex;
            display: -webkit-flex;
            display: -webkit-box;
            -webkit-box-direction: row;
            flex-direction: row;
            text-align: center;
            flex-wrap:row;
            flex-flow: row;
            -webkit-box-flex: row;
            justify-content: space-around;
            -webkit-box-pack:center;
        }
        .left{
                width: 16px;
                position: relative;
                top:8%;
                float: left;
                left: 4%;
                height: auto;
        }
        .right{
            width: 16px;
            position: relative;
            top:-42px;
            float: right;
            right: 10%;
            height: auto;
        }
        .left img,.right img{
            width:16px;
            height: 16px;
        }
        .icos{
            width: 100%;
            height:auto;
            padding-top:10px;
            display: flex;
            display: -webkit-flex;
            display: box;
            flex-direction: column;
            text-align: center;
            flex-wrap:wrap;
            flex-flow: wrap;
            margin-top: 2px;
            border-top: 1px solid #101010;
        }
        #address_bottom{
            top: -13px;
            width: 63%;
            left: 4%;
            height: 20px;
            font-size: 12px;
            position: relative;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
}
        .address_bottom_box{
            width:100%;
            position: relative;
            border-top: 1px solid #101010;
            height: 20px;
            font-family:SourceHanSansSC;
            font-weight:400;
            margin-top:2px;
            font-size:12px;
            padding-top: 5px;
            color:#101010; font-style:normal;
            letter-spacing:0px;
            line-height:21px;
            text-decoration:none;
        }
        #tags{
            width: 99%;
            height: auto;
            display: flex;
            display: -webkit-flex;
            display: -webkit-box;
            -webkit-box-direction: row;
            flex-direction: row;
            text-align: center;
            flex-wrap:row;
            flex-flow: row;
            -webkit-box-flex: row;
            justify-content: space-around;
            -webkit-box-pack:center;
            margin-bottom: 10px;
        }
        #tags span{
            width: 20%;
            height: auto;
            padding: 2px;
            color:#000000;
            border: 1px solid rgba(16,16,16,0.65);
            text-align: center;
            border-radius: 3px;
            font-size: 14px;
            margin-right: 20px;
            background: #f5f1f1; 
        }
        .white_space{
            height: 210px;
            width: 100%;
        }
        .yzld{
            width: auto;
            height: auto;
            font-size: 16px;
            color:rgb(18,94,136);
            text-align: left;
            margin-left: 10px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <!-- 详情页详细数据 -->
    <div class="datas_box">
        <div id="title"></div>
        <div class="price"><span id='moneytype'></span><span id="price" style="color: blue;font-size: 20px"></span></div>
        <div id="tags"></div>
        <div id="address_top"></div>
        <div id="parameters"></div>
        <div class="icos">
            <div class="icos_top">
                <div class="icoitem">
                    <img src="../../image/detail_page/cast.png">
                    <span>最多100人</span>
                </div>
                <div class="icoitem">
                    <img src="../../image/detail_page/developer_board.png">
                    <span>10人桌</span>
                </div>
                <div class="icoitem">
                    <img src="../../image/detail_page/scanner.png">
                    <span>十人椅</span>
                </div>
                <div class="icoitem">
                    <img src="../../image/detail_page/phonelink-off.png">
                    <span>封闭式</span>
                </div>
            </div>
            <div class="icos_second">
                <div class="icoitem">
                    <img src="../../image/detail_page/tabletandroid.png">
                    <span>宽带</span>
                </div>
                <div class="icoitem">
                    <img src="../../image/detail_page/sim card.png">
                    <span>白板</span>
                </div>
                <div class="icoitem">
                    <img src="../../image/detail_page/speakergroup.png">
                    <span>纸茶杯</span>
                </div>
                <div class="icoitem">
                    <img src="../../image/detail_page/md-watch.png">
                    <span>智能会议</span>
                </div>
            </div>
            <p class="yzld">驿站亮点</p>
            <div class="tips">
                遍布全城随时会议，会议时间安排灵活，移动畅聊物超所值，硬件配置完善齐全。
            </div>
            <div class="address_bottom_box">
                <div class="left">
                    <img src="../../image/detail_page/mapmarker.png" />
                </div>
                <p id="address_bottom"></p>
                <div class="right">
                    <img src="../../image/detail_page/location-arrow.png" tapmode onclick="showmap_apps()" />
                </div>
            </div>
            
        </div>
        <div class="white_space"></div>
    </div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript">
    var address_name;
    var city_name;
    var dlat;
    var dlon;
    var hight_set;
    var bmap_set;
    var title_html = document.getElementById("title");
    var price_html = document.getElementById("price");
    var address_bottom = document.getElementById("address_bottom");
    var tags_html = document.getElementById("tags");
    var address_top_html = document.getElementById("address_top");
    var parameters_html = document.getElementById("parameters");
    var moneytype = document.getElementById("moneytype")
    var lon_address = 0;
    var lat_address = 0;
    var tagsContent = ""
    var parametersContent = ""
    apiready = function(){
        var screenHeight = api.winHeight;
        var screenWidth = api.winWidth;
        if(api.systemType=="ios"){
            hight_set=10;
            bmap_set = 300;
        }else{
            hight_set=0;
            bmap_set = 335;
            if(screenHeight==695){
                bmap_set = 300;
            }else if(screenHeight==935){
                bmap_set = 140;
            }else if(screenHeight==1280){
                bmap_set = 340;
            }else if(screenHeight==740){
                bmap_set = 345
            }else if(screenHeight==640){
                bmap_set = 344
            }
        }
        var UIScrollPicture = api.require('UIScrollPicture');
        api.ajax({
            url: api.pageParam.filename,
            method: 'get',
        },function(ret, err){
            if (ret) {
                var data_json = ret.data[api.pageParam.name];
                address_bottom.innerHTML = data_json["address"]
                var parameters_list = data_json["parameters"]
                var tags_list = data_json["tags"];
                for(var i=0;i<tags_list.length;i++){
                    tagsContent += "<span>"+tags_list[i]+"</span>"
                };
                for(var j=0;j<parameters_list.length;j++){
                    parametersContent += "<p>"+parameters_list[j]+"</p>"
                };
                parameters_html.innerHTML = parametersContent;
                tags_html.innerHTML = tagsContent;
                title_html.innerHTML = data_json["title"];
                api.setGlobalData({
                    key: 'stage_name',
                    value: data_json["title"]
                });
                price_html.innerHTML = data_json["price"]+"/"+data_json["pricetype"];
                address_top_html.innerHTML = "地址："+data_json["address"];
                moneytype.innerHTML = data_json["moneytype"]
                city_name = data_json["city"]
                address_name = data_json["address"]
                var map =api.require('bMap');
        map.getCoordsFromName({
                    city:city_name,
                    address: address_name
                },function(ret,err){
                    lon_address = ret.lon;
                    lat_address = ret.lat
                    if(ret.status){
                       map.open({
                    rect: {
                        x: 0,
                        y: api.frameHeight+bmap_set,
                        w: api.frameWidth,
                        h: 200
                    },
                    center: {
                        lon: lon_address,
                        lat: lat_address
                    },
                    zoomLevel: 18,
                    showUserLocation: true,
                    fixedOn:api.frameName,
                    fixed:false
                }, function(ret){
                    map.addAnnotations({
                        annotations: [{
                            id: 1,
                            lon: lon_address,
                            lat: lat_address
                        }],
                        draggable: true
                        }, function(ret) {

                        });
                });
                    }else{
                        alert("获取位置失败！")
                    }
                });
        UIScrollPicture.open({
            rect: {
        x: 0,
        y: 0,
        w: api.frameWidth,
        h: api.winHeight / 3 - hight_set
    },
    data: {
        paths: data_json["pics"],
    },
    styles: {
        caption: {
            height: 35,
            color: '#E0FFFF',
            size: 13,
            bgColor: '#696969',
            position: 'bottom'
        },
        indicator: {
           dot:{
             w:10,
             h:10,
             r:5,
             margin:5
          },
            align: 'center',
            color: '#FFFFFF',
            activeColor: '#1296db'
        }
    },
    contentMode: 'scaleToFill',
    interval: 3,
    fixedOn: api.frameName,
    loop: true,
    fixed: false
}, function(ret, err) {
        })
            } else {
                alert( err.msg);
            }
        });
    };
    // 显示导航app
    function showmap_apps(){
        var android_uri_value = "androidamap://keywordNavi?sourceApplication="+api.appName+"&keyword="+address_name+"&style=2"
                api.actionSheet({
                cancelTitle: '取消',
                buttons: ['高德地图','百度地图']
            }, function(ret, err){
                if(ret.buttonIndex==1){
                    // 判断手机是否安装该应用
                    api.appInstalled({
                        appBundle: "com.autonavi.minimap"
                    },function(ret, err){
                        if(ret.installed){
                            setTimeout(function() {
                                api.toast({
                                    msg: '正在打开高德地图',
                                    duration: 2000,
                                    location: 'bottom'
                                });
                            },2000);
                            api.openApp({
                                uri: android_uri_value
                            },function(ret,err){
                            });
                        }else{
                            alert("未安装高德地图")
                        }
                    });
                }else if(ret.buttonIndex==2){
                    api.appInstalled({
                        appBundle: "com.baidu.BaiduMap"
                    },function(ret, err){
                        if(ret.installed){
                            setTimeout(function() {
                                api.toast({
                                    msg: '正在打开百度地图',
                                    duration: 2000,
                                    location: 'bottom'
                                });
                            }, 2000);
                            api.openApp({
                                uri: "baidumap://map/geocoder?src="+api.appName+"&address="+address_name
                            },function(ret,err){
                            });
                        }else{
                            alert("未安装百度地图")
                        }
                    });
                }
            });
    }
</script>
</html>