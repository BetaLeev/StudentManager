<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>时间选择器</title>
    <style>
    body,html{
        width: 100%;
        height: 100%;
        opacity: 1;
        padding: 0px;
        margin:0px;
    }
    .wrap_space{
        width: 60%;
        background: #ffffff;
        height: 300px;
        position: absolute;
        left:20%;
        margin-top: 50%;

    }
    #submit{
        width: 100%;
        position: absolute;
        bottom: 0px;
        font-size: 16px;
        height: 30px;
        letter-spacing: 2px;
        text-align: center;
    }
    </style>   
</head>
<body>
    <!-- button -->
    <div class="wrap_space">
        <button id='submit' tapmode onclick="api.closeFrame()">确定</button>
    </div>
    
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript">
    apiready = function(){
        var myDate = new Date();
        var h = myDate.getHours();
        var m = myDate.getMinutes();
        var timeSelector = api.require('timeSelector');
            timeSelector.open({
                x: api.frameWidth/4,
                y: api.frameHeight/2-128,
                width: api.frameWidth/2,
                hour:h,
                minute:m,
                height: 180,
                fixedOn: api.frameName,
                fixed:true
            }, function(ret, err) {
                if (ret) {
                    h = ret.hour
                    m = ret.minit
                    if(m<10){
                        m='0'+m.toString()
                    }
                    if(h<10){
                        h = '0'+h.toString()
                    }
                    api.execScript({
                        name: api.winName,
                        frameName: 'order_frame_module',
                        script: "choose_timevalue('"+h+":"+m+"')"
                    });
                } else {
                    alert(JSON.stringify(err));
                }
            });
    }
        
</script>
</html>