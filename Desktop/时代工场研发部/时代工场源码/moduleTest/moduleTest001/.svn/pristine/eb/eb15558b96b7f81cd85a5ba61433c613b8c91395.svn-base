<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>找地儿</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css"/>
    <style>
        /*头部css*/
        body,html{
            padding: 0px;
            margin: 0px;
        }
        #header{
            position: relative;
            top:30px;
            width:99%;height:35px;
            background-color: white;
        }
        #header .back{
            position: relative;
            width:25px;
            height: 25px;
            margin-left: 10px;
            margin-top: 8px;
            z-index: 9999;

        }
        #header .title{
            position: relative;
            font-family:'微软雅黑'; 
            font-weight:500; font-size:18px;
            width:100%;
            top:-35px;
            text-align: center;
            justify-content: center;
            color:#000000; font-style:normal;
            letter-spacing:3px; line-height:39px; text-decoration:none;
        
        
    </style>
</head>
<body>
    <!-- 找地儿头部 -->
    <header id="header">
        <img class="back" src="../image/findaddress/back.png" tapmode onclick="api.closeWin()" />
        <span class="title">请选择城市</span>
    </header>
    
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
    var header = document.getElementById("#header");
    apiready = function(){
        $api.fixStatusBar(header);
        var city_name = api.getGlobalData({key: 'GPS_city_name'});
        var UICityList = api.require('UICityList');
        UICityList.open({
            rect: {
                x: 0,
                y: 70,
                w: api.winWidth,
                h: 'auto'
            },
            resource: '../json/uicitylist.json',
            styles: {
                searchBar: {
                    bgColor: '#696969',
                    cancelColor: '#E3E3E3'
                },
                location: {
                    color: '#696969',
                    size: 12
                },
                sectionTitle: {
                    bgColor: '#eee',
                    color: '#000',
                    size: 12
                },
                item: {
                    bgColor: '#fff',
                    activeBgColor: '#696969',
                    color: '#000',
                    size: 14,
                    height: 40
                },
                indicator: {
                    bgColor: '#fff',
                    color: '#696969'
                }
            },
            currentCity: city_name,
            locationWay: 'GPS',
            hotTitle: '热门城市',
            placeholder: '输入城市名或首字母查询'
        }, function(ret, err) {
            if (ret) {
                if (ret.eventType == 'selected') {
                    var cityName = ret.cityInfo.city;
                    api.setGlobalData({
                        key: 'now_city_name',
                        value: cityName
                    });
                    UICityList.hide();
                    api.execScript({
                        name: api.pageParam.name,
                        frameName: 'framehomepage',
                        script: "changecityvalue('"+cityName+"')"
                    });
                    api.closeWin({
                        name: api.winName
                    });
                }

            } else {
                alert(JSON.stringify(err));
            }
        })
    };
        
</script>
</html>